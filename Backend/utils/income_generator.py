from OrderBackend import models
final_income = [{"shop": "\u80d6\u80d6\u8001\u7239\u70b8\u96de", "income": 800}, {"shop": "Chili's \u7f8e\u5f0f\u9910\u5ef3", "income": 2820}, {"shop": "TGI Fridays", "income": 1000}, {"shop": "\u8cbb\u57ce\u7f8e\u5f0f\u9910\u5ef3", "income": 1140}, {"shop": "\u9f90\u5fb7\u7f85\u838e", "income": 1500}, {"shop": "Nola Kitchen", "income": 880}, {"shop": "\u9f0e\u6cf0\u8c50", "income": 0}, {"shop": "\u6625\u6c34\u5802", "income": 0}, {"shop": "Coco ", "income": 620}, {"shop": "\u722d\u9bae", "income": 0}, {"shop": "\u82b1\u6708\u5d50", "income": 0}, {"shop": "sukiya", "income": 0}, {"shop": "\u8b9a\u5c90\u672c\u5bb6", "income": 0}, {"shop": "\u6881\u793e\u6f22", "income": 0}, {"shop": "\u6eff\u7ca5\u7a57", "income": 0}, {"shop": "\u6d2a\u5e2b\u7236\u725b\u8089\u9eb5", "income": 0}, {"shop": "CqdpS", "income": 1660}, {"shop": "pOfoX", "income": 3430}, {"shop": "aaxdx", "income": 3427}, {"shop": "wIHMr", "income": 1944}, {"shop": "LemJW", "income": 1149}, {"shop": "cBXqJ", "income": 1520}, {"shop": "bwvWq", "income": 1142}, {"shop": "SvSMF", "income": 1572}, {"shop": "kaDdN", "income": 1891}, {"shop": "gdxij", "income": 2080}, {"shop": "HQUPJ", "income": 3701}, {"shop": "aHsZI", "income": 984}, {"shop": "xTeru", "income": 3064}, {"shop": "EpHGE", "income": 1197}, {"shop": "skifI", "income": 3365}, {"shop": "vDbvz", "income": 4677}, {"shop": "Wfvkj", "income": 726}, {"shop": "MPYUZ", "income": 1882}, {"shop": "gmAXB", "income": 1670}, {"shop": "TLpLV", "income": 2861}, {"shop": "MfYPA", "income": 0}, {"shop": "fmYmW", "income": 0}, {"shop": "VCmrb", "income": 0}, {"shop": "IVpKt", "income": 0}, {"shop": "KTnwk", "income": 0}, {"shop": "ylBeG", "income": 0}, {"shop": "QAtad", "income": 0}, {"shop": "FFwuV", "income": 0}, {"shop": "dfVpZ", "income": 0}, {"shop": "oieyc", "income": 0}, {"shop": "rIRBu", "income": 0}, {"shop": "IBnqC", "income": 0}, {"shop": "aycHa", "income": 0}, {"shop": "obewC", "income": 0}, {"shop": "ViDEI", "income": 0}, {"shop": "mxahr", "income": 0}, {"shop": "qNEuj", "income": 0}, {"shop": "BLDyL", "income": 0}, {"shop": "nwruo", "income": 0}, {"shop": "KoYXC", "income": 0}, {"shop": "aDfvF", "income": 0}, {"shop": "TkOoO", "income": 0}, {"shop": "DLcRz", "income": 0}, {"shop": "MxbMt", "income": 0}, {"shop": "HMxJO", "income": 0}, {"shop": "rhdnl", "income": 0}, {"shop": "uzPrh", "income": 0}, {"shop": "wtVfo", "income": 0}, {"shop": "vskTo", "income": 0}, {"shop": "UyfmW", "income": 0}, {"shop": "pbpUl", "income": 0}, {"shop": "gkJxo", "income": 0}, {"shop": "mHkPf", "income": 0}, {"shop": "ZDqOi", "income": 0}, {"shop": "hOIxL", "income": 0}, {"shop": "yzSah", "income": 0}, {"shop": "IIQoG", "income": 0}, {"shop": "uzYOV", "income": 0}, {"shop": "TdAxT", "income": 0}, {"shop": "sReHK", "income": 0}, {"shop": "GKgRP", "income": 0}, {"shop": "GTRQH", "income": 0}, {"shop": "iSwiA", "income": 0}, {"shop": "DnHiU", "income": 0}, {"shop": "hMwSP", "income": 0}, {"shop": "hITue", "income": 0}, {"shop": "wlpuY", "income": 0}, {"shop": "HEkNV", "income": 0}, {"shop": "fPLax", "income": 0}, {"shop": "EgSCv", "income": 0}, {"shop": "KrdWr", "income": 0}, {"shop": "ZxKJj", "income": 0}, {"shop": "icovE", "income": 0}, {"shop": "JvsYJ", "income": 0}, {"shop": "OEGGk", "income": 0}, {"shop": "IQeDx", "income": 0}, {"shop": "FoadK", "income": 0}, {"shop": "eOSFs", "income": 0}, {"shop": "RysnU", "income": 0}, {"shop": "aUXBk", "income": 0}, {"shop": "xlYRe", "income": 0}, {"shop": "tZTBO", "income": 0}, {"shop": "qZCEC", "income": 0}, {"shop": "sJkqg", "income": 0}, {"shop": "XGmVy", "income": 0}, {"shop": "XAqMo", "income": 0}, {"shop": "amyrm", "income": 0}, {"shop": "PqKuZ", "income": 0}, {"shop": "ebrGh", "income": 0}, {"shop": "ddtga", "income": 0}, {"shop": "MZLES", "income": 0}, {"shop": "KrqTA", "income": 0}, {"shop": "PPGEm", "income": 0}, {"shop": "VFgyj", "income": 0}, {"shop": "aTKbV", "income": 0}, {"shop": "otXsM", "income": 0}, {"shop": "Tzvbj", "income": 0}]

def income_generator():
    all_restaurant_list = list(models.Restaurant.objects.all())
    result = []
    for i in range(len(all_restaurant_list)):
        money_list = list(models.Money.objects.filter(restaurantID = all_restaurant_list[i].id))
        income = 0
        for j in range(len(money_list)):
            try:    
                income += models.Order.objects.get(id = money_list[j].orderID).totalSum
            except:
                print(money_list[j].orderID)
        result.append({"shop" : all_restaurant_list[i].restaurantName,"income" : income,})
    global final_income 
    final_income = result
    return 0